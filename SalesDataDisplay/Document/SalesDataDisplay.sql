SET SQL_MODE = "NO_AUTO_VALUE_NO_ZERO,STRICT_ALL_TABLES,TRADITIONAL";
START TRANSACTION;
SET time_zone = "+00:00";

/*販売システム*/
CREATE DATABASE IF NOT EXISTS SALES_SYSTEM;

USE SALES_SYSTEM;

/*支店マスタ*/
CREATE TABLE BRANCH_MASTER(
    id INT(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '支店ID',
    name VARCHAR(40) NOT NULL COMMENT '支店名',
    abbreviation VARCHAR(20) COMMENT '支店略称',
    active BOOLEAN NOT NULL COMMENT '活性フラグ'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='支店マスタ';

/*注文情報*/
CREATE TABLE ORDER_INFO(
    id INT(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '注文ID',
    branch_id INT(6) UNSIGNED ZEROFILL NOT NULL COMMENT '支店ID',
    customer_id INT(6) UNSIGNED ZEROFILL NOT NULL COMMENT '顧客ID',
    transport_id INT(6) UNSIGNED ZEROFILL NOT NULL COMMENT '輸送ID',
    order_date DATE NOT NULL COMMENT '注文日付',
    order_state INT(2) UNSIGNED ZEROFILL NOT NULL COMMENT '注文ステータス',
    deposit_amount FLOAT UNSIGNED NOT NULL COMMENT '入金額'    
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='注文情報';

/*注文明細*/
CREATE TABLE ORDER_DETAILS(
    detail_id INT(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '注文明細ID',
    order_id INT(6) UNSIGNED ZEROFILL NOT NULL COMMENT '注文ID',
    product_id INT(6) UNSIGNED ZEROFILL NOT NULL COMMENT '商品ID',
    discount_rate INT(3) NOT NULL COMMENT '割引率'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='注文明細';

/*顧客情報*/
CREATE TABLE CUSTOMER_INFO(
    id INT(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '顧客ID',
    last_name VARCHAR(20) NOT NULL COMMENT '苗字',
    first_name VARCHAR(20) NOT NULL COMMENT '名前',
    age INT(3) NOT NULL COMMENT '年齢',
    gender_code INT(2) NOT NULL COMMENT '性別',
    email VARCHAR(40) NULL COMMENT 'メール',
    tell VARCHAR(20) NULL COMMENT '電話番号',
    active BOOLEAN NOT NULL COMMENT '活性フラグ'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='顧客情報';

/*商品情報*/
CREATE TABLE PRODUCT_INFO(
    id INT(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '商品ID',
    name VARCHAR(40) NOT NULL COMMENT '商品名',
    category_code INT(2) UNSIGNED ZEROFILL NOT NULL COMMENT '商品カテゴリ',
    price FLOAT UNSIGNED NOT NULL COMMENT '価格',
    active BOOLEAN NOT NULL COMMENT '活性フラグ'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='商品情報';

/*共有マスタ*/
CREATE TABLE COMMON_MASTER(
    major_items CHAR(20) NOT NULL COMMENT '大項目',
    sub_items INT(2) UNSIGNED ZEROFILL NOT NULL COMMENT '小項目',
    name VARCHAR(40) NOT NULL COMMENT '名前'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='共有マスタ';

/*お知らせマスタ*/
CREATE TABLE NOTICE_MASTER(
    id int(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT 'お知らせID',
    notification_date DATE COMMENT '通知日',
    info VARCHAR(256) NOT NULL COMMENT '通知情報',
    reference_name VARCHAR(256) COMMENT '参照名',
    reference VARCHAR(256) COMMENT '参照'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='お知らせマスタ';

/*システムユーザ*/
CREATE TABLE SYS_USER(
    id int(6) UNSIGNED ZEROFILL NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT 'ユーザID',
    name VARCHAR(40) NOT NULL UNIQUE COMMENT '名前',
    email VARCHAR(256) NOT NULL UNIQUE COMMENT 'メールアドレス',
    password LONGTEXT NOT NULL COMMENT 'パスワード（ハッシュ値）'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='システムユーザ';

/*支店データ*/
INSERT INTO BRANCH_MASTER VALUES(000001,'川崎支店A','川崎A',true);
INSERT INTO BRANCH_MASTER VALUES(000002,'川崎支店B','川崎B',true);
INSERT INTO BRANCH_MASTER VALUES(000003,'横浜支店','横浜',true);
INSERT INTO BRANCH_MASTER VALUES(000004,'上大岡支店','上大岡',true);
INSERT INTO BRANCH_MASTER VALUES(000005,'千葉店支店','千葉店',true);

/*注文データ*/
INSERT INTO ORDER_INFO VALUES(000001,000001,000001,000000,'2020-11-29',2,598296);
INSERT INTO ORDER_INFO VALUES(000002,000002,000004,000000,'2020-11-29',2,4570);
INSERT INTO ORDER_INFO VALUES(000003,000002,000004,000000,'2020-12-29',2,4570);
INSERT INTO ORDER_INFO VALUES(000004,000002,000004,000000,'2021-01-29',2,4570);
INSERT INTO ORDER_INFO VALUES(000005,000002,000004,000000,'2021-02-28',1,4570);
INSERT INTO ORDER_INFO VALUES(000006,000002,000004,000000,'2021-03-29',0,0);
INSERT INTO ORDER_INFO VALUES(000007,000005,000002,000000,'2020-12-24',2,78040);

/*注文明細データ*/
INSERT INTO ORDER_DETAILS VALUES(000001,000001,000001,0);
INSERT INTO ORDER_DETAILS VALUES(000002,000001,000002,0);
INSERT INTO ORDER_DETAILS VALUES(000003,000001,000003,0);
INSERT INTO ORDER_DETAILS VALUES(000004,000001,000004,0);
INSERT INTO ORDER_DETAILS VALUES(000005,000001,000009,0);

INSERT INTO ORDER_DETAILS VALUES(000006,000002,000023,0);
INSERT INTO ORDER_DETAILS VALUES(000007,000003,000023,0);
INSERT INTO ORDER_DETAILS VALUES(000008,000004,000023,0);
INSERT INTO ORDER_DETAILS VALUES(000009,000005,000023,0);
INSERT INTO ORDER_DETAILS VALUES(000010,000006,000023,0);

INSERT INTO ORDER_DETAILS VALUES(000011,000007,000023,0);
INSERT INTO ORDER_DETAILS VALUES(000012,000007,000014,0);
INSERT INTO ORDER_DETAILS VALUES(000013,000007,000016,0);
INSERT INTO ORDER_DETAILS VALUES(000014,000007,000019,0);

/*顧客データ*/
INSERT INTO CUSTOMER_INFO VALUES(000001,'北上','魅代',24,1,'kitagemi_miyo@example.com','010-1234-5678',true);
INSERT INTO CUSTOMER_INFO VALUES(000002,'星乃','ヒカリ',20,1,'hosino_hikari@example.com','010-5555-6666',true);
INSERT INTO CUSTOMER_INFO VALUES(000003,'大空','明',30,0,'ozora_akira@example.com','010-9999-9999',true);
INSERT INTO CUSTOMER_INFO VALUES(000004,'吉良','両',26,2,'kira_ryou@example.com','010-7777-7777',true);

/*商品情報*/
INSERT INTO PRODUCT_INFO VALUES(000001,'冷蔵庫',0,146080,true);
INSERT INTO PRODUCT_INFO VALUES(000002,'洗濯機',0,221980,true);
INSERT INTO PRODUCT_INFO VALUES(000003,'掃除機',0,67980,true);
INSERT INTO PRODUCT_INFO VALUES(000004,'ノートパソコン',1,159770,true);
INSERT INTO PRODUCT_INFO VALUES(000005,'ゲーミングノート',1,263800,true);
INSERT INTO PRODUCT_INFO VALUES(000006,'デスクトップ',1,184580,true);
INSERT INTO PRODUCT_INFO VALUES(000007,'ゲーミングデスクトップ',1,344800,true);
INSERT INTO PRODUCT_INFO VALUES(000008,'リーダブルコード',2,2640,true);
INSERT INTO PRODUCT_INFO VALUES(000009,'HTML/CSS入門講座',2,2486,true);
INSERT INTO PRODUCT_INFO VALUES(000010,'PHP超入門',2,2618,true);
INSERT INTO PRODUCT_INFO VALUES(000012,'Webアプリケーションの作り方',2,3520,true);
INSERT INTO PRODUCT_INFO VALUES(000013,'PythonでWebサービス&スマホアプリ',2,3520,true);
INSERT INTO PRODUCT_INFO VALUES(000014,'テントA',3,11000,true);
INSERT INTO PRODUCT_INFO VALUES(000015,'テントB',3,108900,true);
INSERT INTO PRODUCT_INFO VALUES(000016,'テントC',3,48400,true);
INSERT INTO PRODUCT_INFO VALUES(000017,'折り畳みチェアA',3,36300,true);
INSERT INTO PRODUCT_INFO VALUES(000018,'折り畳みチェアB',3,44000,true);
INSERT INTO PRODUCT_INFO VALUES(000019,'折り畳みチェアC',3,14070,true);
INSERT INTO PRODUCT_INFO VALUES(000020,'ランタンA',3,7700,true);
INSERT INTO PRODUCT_INFO VALUES(000021,'ランタンB',3,15180,true);
INSERT INTO PRODUCT_INFO VALUES(000022,'ランタンC',3,4730,true);
INSERT INTO PRODUCT_INFO VALUES(000023,'ケダモノ 24本',4,4570,true);
INSERT INTO PRODUCT_INFO VALUES(000024,'オレカナC 10本',4,987,true);
INSERT INTO PRODUCT_INFO VALUES(000025,'リポビターDeath 10本',4,1150,true);
INSERT INTO PRODUCT_INFO VALUES(000026,'タダノ牛 24本',4,6940,true);
INSERT INTO PRODUCT_INFO VALUES(000027,'ライフシールドエックス 30本',4,2890,true);

/*共有データ*/
INSERT INTO COMMON_MASTER VALUES('GENDER',0,'男');
INSERT INTO COMMON_MASTER VALUES('GENDER',1,'女');
INSERT INTO COMMON_MASTER VALUES('GENDER',2,'どちらでもない');
INSERT INTO COMMON_MASTER VALUES('CATEGORY',0,'家電');
INSERT INTO COMMON_MASTER VALUES('CATEGORY',1,'パソコン');
INSERT INTO COMMON_MASTER VALUES('CATEGORY',2,'書籍');
INSERT INTO COMMON_MASTER VALUES('CATEGORY',3,'アウトドア・スポーツ用品');
INSERT INTO COMMON_MASTER VALUES('CATEGORY',4,'食品＆飲料');
INSERT INTO COMMON_MASTER VALUES('ORDER_STATE',0,'商品確認中');
INSERT INTO COMMON_MASTER VALUES('ORDER_STATE',1,'配達中');
INSERT INTO COMMON_MASTER VALUES('ORDER_STATE',2,'配達済');

/*お知らせマスタ*/
INSERT INTO NOTICE_MASTER VALUES(000001,'2020-11-30','リリースのお知らせ','参照','#');
INSERT INTO NOTICE_MASTER VALUES(000002,'2020-12-01','リリース延期のお知らせ','参照','#');
INSERT INTO NOTICE_MASTER VALUES(000003,'2020-12-02','リリース延期のお知らせ','参照','#');
INSERT INTO NOTICE_MASTER VALUES(000004,'2020-12-03','リリース延期のお知らせ','参照','#');
INSERT INTO NOTICE_MASTER VALUES(000005,'2020-12-04','リリース延期のお知らせ','参照','#');
INSERT INTO NOTICE_MASTER VALUES(000006,'2020-12-05','リリース延期のお知らせ','参照','#');
INSERT INTO NOTICE_MASTER VALUES(000007,'2020-12-06','運用開始のお知らせ','参照','#');

COMMIT;